<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Daniel Auld - Spatial Portfolio</title>
    <!-- Upgraded to A-Frame 1.6.0 for better WebXR/Vision Pro support -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        
        /* The Compatibility Gate Overlay */
        #compatibility-gate {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            text-align: center;
        }
        #compatibility-gate h1 { font-weight: 200; font-size: 2.5rem; margin-bottom: 1rem; }
        #compatibility-gate p { color: #888; max-width: 400px; line-height: 1.6; }
        .hidden { display: none !important; }
        .bypass-link { margin-top: 30px; color: #333; font-size: 0.8rem; text-decoration: none; cursor: pointer; }
        
        /* Simple HUD for context */
        #hud {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 30px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
            pointer-events: none;
            transition: opacity 0.5s;
            border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

    <!-- Compatibility Gate -->
    <div id="compatibility-gate">
        <h1> Vision Pro Required</h1>
        <p>This spatial portfolio is designed exclusively for eye-tracking interactions.</p>
        <p>Please visit this URL on your Apple Vision Pro.</p>
        <a class="bypass-link" onclick="document.getElementById('compatibility-gate').classList.add('hidden')">Developer Override (Test on Desktop)</a>
    </div>

    <!-- HUD -->
    <div id="hud" class="hidden">Daniel Auld • Look to hover • Pinch to select</div>

    <!-- 
        SCENE SETUP:
        cursor="rayOrigin: mouse" is the KEY for Vision Pro. 
        It maps the system's eye-tracking directly to 'mouse' events. 
        We disable 'fuse' because we want 'pinch' (click) not 'stare to click'.
    -->
    <a-scene cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .interactable" background="color: #000">

        <a-assets>
            <!-- Preloading assets if needed -->
        </a-assets>

        <!-- Environment: "Tron" style dark grid, very Apple-esque -->
        <a-entity environment="preset: starry; groundColor: #050505; grid: 1x1; gridColor: #222; lightPosition: 0 5 -5"></a-entity>

        <!-- TITLE BLOCK -->
        <a-entity position="0 3 -4">
            <a-text value="DANIEL AULD" color="#FFF" align="center" width="7" font="exo2bold"></a-text>
            <a-text value="Spatial Experience Designer" position="0 -0.4 0" color="#888" align="center" width="3.5"></a-text>
        </a-entity>

        <!-- PORTFOLIO ITEM 1: SANE Australia -->
        <a-entity position="-1.8 1.4 -3" class="interactable"
                  animation__scale="property: scale; to: 1.05 1.05 1.05; dur: 200; startEvents: mouseenter"
                  animation__descale="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
            
            <!-- The Card -->
            <a-box color="#1c1c1e" width="1.4" height="1.8" depth="0.05" opacity="0.9" metalness="0.5" roughness="0.2">
                <!-- Inner Border glow effect on hover via opacity -->
                <a-plane width="1.45" height="1.85" position="0 0 -0.01" color="#FF4D4D" opacity="0"
                         animation__hover="property: opacity; to: 0.4; dur: 200; startEvents: mouseenter"
                         animation__leave="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-plane>
            </a-box>

            <!-- Text Content -->
            <a-text value="SANE Australia" position="0 0.5 0.04" align="center" width="2.8" color="#FFF"></a-text>
            <a-text value="GOLD WINNER\n2025 Good Design Awards" position="0 0.2 0.04" align="center" width="1.8" color="#FF4D4D"></a-text>
            
            <!-- Description (Hidden until looked at) -->
            <a-text value="National peer-support platform\nredesign. Human-centred\nco-design approach." 
                    position="0 -0.4 0.04" align="center" width="1.6" color="#AAA" opacity="0"
                    animation__fadein="property: opacity; to: 1; dur: 300; startEvents: mouseenter"
                    animation__fadeout="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-text>
        </a-entity>

        <!-- PORTFOLIO ITEM 2: Hubbl / Foxtel -->
        <a-entity position="0 1.4 -2.8" class="interactable"
                  animation__scale="property: scale; to: 1.05 1.05 1.05; dur: 200; startEvents: mouseenter"
                  animation__descale="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
            
            <a-box color="#1c1c1e" width="1.4" height="1.8" depth="0.05" opacity="0.9" metalness="0.5" roughness="0.2">
                <a-plane width="1.45" height="1.85" position="0 0 -0.01" color="#007AFF" opacity="0"
                         animation__hover="property: opacity; to: 0.4; dur: 200; startEvents: mouseenter"
                         animation__leave="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-plane>
            </a-box>

            <a-text value="Hubbl & Foxtel" position="0 0.5 0.04" align="center" width="2.8" color="#FFF"></a-text>
            <a-text value="Streaming Ecosystem\nUX Lead" position="0 0.2 0.04" align="center" width="1.8" color="#007AFF"></a-text>
            
            <a-text value="Designed interactive prototypes\nfor TV and Mobile.\nConsolidated Binge/Kayo UX." 
                    position="0 -0.4 0.04" align="center" width="1.6" color="#AAA" opacity="0"
                    animation__fadein="property: opacity; to: 1; dur: 300; startEvents: mouseenter"
                    animation__fadeout="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-text>
        </a-entity>

        <!-- PORTFOLIO ITEM 3: ADHA -->
        <a-entity position="1.8 1.4 -3" class="interactable"
                  animation__scale="property: scale; to: 1.05 1.05 1.05; dur: 200; startEvents: mouseenter"
                  animation__descale="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
            
            <a-box color="#1c1c1e" width="1.4" height="1.8" depth="0.05" opacity="0.9" metalness="0.5" roughness="0.2">
                <a-plane width="1.45" height="1.85" position="0 0 -0.01" color="#34C759" opacity="0"
                         animation__hover="property: opacity; to: 0.4; dur: 200; startEvents: mouseenter"
                         animation__leave="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-plane>
            </a-box>

            <a-text value="Digital Health Agency" position="0 0.5 0.04" align="center" width="2.6" color="#FFF"></a-text>
            <a-text value="my health app\n2023 Winner" position="0 0.2 0.04" align="center" width="1.8" color="#34C759"></a-text>
            
            <a-text value="End-to-end design for\nnational health app.\nClinical safety validation." 
                    position="0 -0.4 0.04" align="center" width="1.6" color="#AAA" opacity="0"
                    animation__fadein="property: opacity; to: 1; dur: 300; startEvents: mouseenter"
                    animation__fadeout="property: opacity; to: 0; dur: 200; startEvents: mouseleave"></a-text>
        </a-entity>

        <!-- CAMERA RIG - NO CURSOR VISIBLE -->
        <a-entity id="rig" position="0 1.6 0">
            <!-- 
                Look Ma, no cursor! 
                We removed the <a-cursor> entity completely.
                This ensures the user only sees the real world and your content.
            -->
            <a-camera look-controls="enabled: true"></a-camera>
            
            <!-- Optional: Hand controllers for full immersion if they use them -->
            <a-entity laser-controls="hand: left" raycaster="objects: .interactable; far: 10"></a-entity>
            <a-entity laser-controls="hand: right" raycaster="objects: .interactable; far: 10"></a-entity>
        </a-entity>

    </a-scene>

    <script>
        // 1. Apple Vision Pro Detection Logic
        // The Vision Pro User Agent typically masquerades as a Macintosh but has Touch Points.
        // It also specifically supports WebXR "immersive-vr" which we could check, 
        // but this UA check is a fast synchronous way to gate the UI.
        
        function isLikelyVisionPro() {
            const isMac = navigator.userAgent.includes("Macintosh");
            const hasTouch = navigator.maxTouchPoints > 0;
            // On AVP, isMac is true AND hasTouch is true. 
            // On a normal MacBook, hasTouch is false. 
            // On an iPad, it might say Macintosh but usually only if "Request Desktop Site" is on.
            return (isMac && hasTouch) || navigator.userAgent.includes("Vision"); 
        }

        window.addEventListener('DOMContentLoaded', () => {
            const gate = document.getElementById('compatibility-gate');
            const hud = document.getElementById('hud');

            if (isLikelyVisionPro()) {
                // If it's Vision Pro, hide the gate immediately
                gate.classList.add('hidden');
                hud.classList.remove('hidden');
            } else {
                // Keep the gate visible for Desktop/Mobile users
                console.log("Not detected as Vision Pro. Showing gate.");
            }
        });

        // 2. Click Handling (Pinch)
        // Even though we use hover effects, we can still add click listeners for "Select" (Pinch)
        // giving the user tactile feedback or opening a link.
        document.querySelectorAll('.interactable').forEach(el => {
            el.addEventListener('click', () => {
                // Visual feedback for the "Pinch"
                el.setAttribute('animation__click', 'property: scale; to: 0.95 0.95 0.95; dur: 100; easing: easeOutQuad');
                setTimeout(() => {
                    el.removeAttribute('animation__click');
                    // Reset scale handled by mouseleave/enter logic usually, 
                    // but we can force it back if needed or let the existing hover logic handle it.
                    el.setAttribute('scale', '1.05 1.05 1.05'); 
                }, 100);
                
                const title = el.querySelector('a-text').getAttribute('value');
                document.getElementById('hud').textContent = "Selected: " + title;
            });
        });
    </script>
</body>
</html>
